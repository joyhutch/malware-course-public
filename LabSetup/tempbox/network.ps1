# Setup Isolated Env

## Set Static IP for REmnux 
$remnuxIP = "10.10.10.2"
$newIntfce = "Ethernet 2"

## Set static IP for Windows host: 
## Set Remnux as Default Gateway for our new network interface
$winIP = "10.10.10.3" 
netsh interface ip set address "$newIntfce" static $winIP 255.255.255.0 $remnuxIP


# Set the dns server to REMNUX
netsh interface ip set dns name="$newIntfce" static $remnuxIP
Add-Content C:\Windows\System32\drivers\etc\hosts "$remnuxIP remnux"


## Don't forget to read the code you run :-)
& 'C:\Program Files\Google\Chrome\Application\chrome.exe' https://www.youtube.com/watch?v=dQw4w9WgXcQ

## Much Hacks. Such Malware.
New-Item -Path C:\ -Name BGInfo -ItemType Directory -ErrorAction SilentlyContinue

Invoke-WebRequest -Uri 'https://github.com/kbsec/CS-501-2021/raw/main/Assignments/Assignment-0/misc/wallpaper.jpg' -OutFile "C:\BGInfo\wallpaper.jpg"
Invoke-WebRequest -Uri "https://github.com/kbsec/CS-501-2021/blob/main/Assignments/Assignment-0/misc/bginfo.bgi?raw=true"

New-ItemProperty -Path HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Run\ -Name BGInfo -Value "C:\tools\sysinternals\Bginfo64.exe /accepteula /iC:\BGInfo\bginfo.bgi /timer:0"

# note most of the malware you see in this class will not run unless this file exists at  this path :) 
## Conversely, if this file does not exist, your computer **should** be safe but you **should not** run anything outside of your sandbox!
new-item C:\malware\ch0nky.txt
