#!/usr/bin/python

import os

# make a test file 
def make_file(file_name):
    with open(file_name, "wb+") as f:
        data = b"Hello\0I am a c string!\0I am another c string!\0" + os.urandom(500) + b"I am another c string!\0"
        f.write(data)

# steps 1 and 2 
def load_file(file_name):
    with open(file_name, "rb") as f:
        data = f.read()
    return data
    
# min/max values
ascii_min = 32
ascii_max = 126
null = 0

make_file("test.txt")
f_data = load_file("test.txt")
data_size = len(f_data)
start = -1
end = -1

def found_string():
    if end - start >= 4:
        #print(f"start = {start}, end = {end}")
        print(f"string>{f_data[start:end + 1].decode("ascii")}</string>\n")

for i in range(0, data_size):
    #print(f_data[i])
    x = int(f_data[i])
    if 32 <= x <= 126 and start == -1:
        #print(x)
        start = i
    elif x is null and start != -1:
        end = i
        found_string()
        start = -1
    elif x < 32 or x > 126:
        start = -1 